"use strict";var inherits=require("inherits"),$=require("../../util/preconditions"),Input=require("./input"),Output=require("../output"),Sighash=require("../sighash"),Script=require("../../script"),Signature=require("../../crypto/signature"),TransactionSignature=require("../signature");function PublicKeyInput(){Input.apply(this,arguments)}inherits(PublicKeyInput,Input),PublicKeyInput.prototype.getSignatures=function(t,i,u,e){$.checkState(this.output instanceof Output),e=e||Signature.SIGHASH_ALL|Signature.SIGHASH_FORKID;var r=i.toPublicKey();return r.toString()===this.output.script.getPublicKey().toString("hex")?[new TransactionSignature({publicKey:r,prevTxId:this.prevTxId,outputIndex:this.outputIndex,inputIndex:u,signature:Sighash.sign(t,i,e,u,this.output.script,this.output.satoshisBN),sigtype:e})]:[]},PublicKeyInput.prototype.addSignature=function(t,i){return $.checkState(this.isValidSignature(t,i),"Signature is invalid"),this.setScript(Script.buildPublicKeyIn(i.signature.toDER(),i.sigtype)),this},PublicKeyInput.prototype.clearSignatures=function(){return this.setScript(Script.empty()),this},PublicKeyInput.prototype.isFullySigned=function(){return this.script.isPublicKeyIn()},PublicKeyInput.SCRIPT_MAX_SIZE=74,PublicKeyInput.prototype._estimateSize=function(){return Input.BASE_SIZE+PublicKeyInput.SCRIPT_MAX_SIZE},module.exports=PublicKeyInput;