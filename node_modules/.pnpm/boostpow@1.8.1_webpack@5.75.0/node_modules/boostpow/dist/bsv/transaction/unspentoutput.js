"use strict";var _=require("../util/_"),$=require("../util/preconditions"),JSUtil=require("../util/javas"),Script=require("../script"),Address=require("../address");function UnspentOutput(t){if(!(this instanceof UnspentOutput))return new UnspentOutput(t);$.checkArgument(_.isObject(t),"Must provide an object from where to extract data");var e=t.address?new Address(t.address):void 0,s=t.txid?t.txid:t.txId;if(!s||!JSUtil.isHexaString(s)||s.length>64)throw new Error("Invalid TXID in object",t);var i=_.isUndefined(t.vout)?t.outputIndex:t.vout;if(!_.isNumber(i))throw new Error("Invalid outputIndex, received "+i);$.checkArgument(!_.isUndefined(t.scriptPubKey)||!_.isUndefined(t.script),"Must provide the scriptPubKey for that output!");var n=new Script(t.scriptPubKey||t.script);$.checkArgument(!_.isUndefined(t.amount)||!_.isUndefined(t.satoshis),"Must provide an amount for the output");var r=_.isUndefined(t.amount)?t.satoshis:Math.round(1e8*t.amount);$.checkArgument(_.isNumber(r),"Amount must be a number"),JSUtil.defineImmutable(this,{address:e,txId:s,outputIndex:i,script:n,satoshis:r})}UnspentOutput.prototype.inspect=function(){return"<UnspentOutput: "+this.txId+":"+this.outputIndex+", satoshis: "+this.satoshis+", address: "+this.address+">"},UnspentOutput.prototype.toString=function(){return this.txId+":"+this.outputIndex},UnspentOutput.fromObject=function(t){return new UnspentOutput(t)},UnspentOutput.prototype.toObject=UnspentOutput.prototype.toJSON=function(){return{address:this.address?this.address.toString():void 0,txid:this.txId,vout:this.outputIndex,scriptPubKey:this.script.toBuffer().toString("hex"),amount:Number.parseFloat((this.satoshis/1e8).toFixed(8))}},module.exports=UnspentOutput;