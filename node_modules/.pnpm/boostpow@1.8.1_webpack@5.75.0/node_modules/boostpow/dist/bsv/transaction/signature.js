"use strict";var _=require("../util/_"),$=require("../util/preconditions"),inherits=require("inherits"),JSUtil=require("../util/javas"),PublicKey=require("../publickey"),errors=require("../errors"),Signature=require("../crypto/signature");function TransactionSignature(e){if(!(this instanceof TransactionSignature))return new TransactionSignature(e);if(e instanceof TransactionSignature)return e;if(_.isObject(e))return this._fromObject(e);throw new errors.InvalidArgument("TransactionSignatures must be instantiated from an object")}inherits(TransactionSignature,Signature),TransactionSignature.prototype._fromObject=function(e){return this._checkObjectArgs(e),this.publicKey=new PublicKey(e.publicKey),this.prevTxId=Buffer.isBuffer(e.prevTxId)?e.prevTxId:Buffer.from(e.prevTxId,"hex"),this.outputIndex=e.outputIndex,this.inputIndex=e.inputIndex,this.signature=e.signature instanceof Signature?e.signature:Buffer.isBuffer(e.signature)?Signature.fromBuffer(e.signature):Signature.fromString(e.signature),this.sigtype=e.sigtype,this},TransactionSignature.prototype._checkObjectArgs=function(e){$.checkArgument(PublicKey(e.publicKey),"publicKey"),$.checkArgument(!_.isUndefined(e.inputIndex),"inputIndex"),$.checkArgument(!_.isUndefined(e.outputIndex),"outputIndex"),$.checkState(_.isNumber(e.inputIndex),"inputIndex must be a number"),$.checkState(_.isNumber(e.outputIndex),"outputIndex must be a number"),$.checkArgument(e.signature,"signature"),$.checkArgument(e.prevTxId,"prevTxId"),$.checkState(e.signature instanceof Signature||Buffer.isBuffer(e.signature)||JSUtil.isHexa(e.signature),"signature must be a buffer or hexa value"),$.checkState(Buffer.isBuffer(e.prevTxId)||JSUtil.isHexa(e.prevTxId),"prevTxId must be a buffer or hexa value"),$.checkArgument(e.sigtype,"sigtype"),$.checkState(_.isNumber(e.sigtype),"sigtype must be a number")},TransactionSignature.prototype.toObject=TransactionSignature.prototype.toJSON=function(){return{publicKey:this.publicKey.toString(),prevTxId:this.prevTxId.toString("hex"),outputIndex:this.outputIndex,inputIndex:this.inputIndex,signature:this.signature.toString(),sigtype:this.sigtype}},TransactionSignature.fromObject=function(e){return $.checkArgument(e),new TransactionSignature(e)},module.exports=TransactionSignature;