"use strict";var assert=require("assert"),BufferWriter=function t(r){if(!(this instanceof t))return new t(r);this.bufLen=0,r?this.set(r):this.bufs=[]};BufferWriter.prototype.set=function(t){return this.bufs=t.bufs||this.bufs||[],this.bufLen=this.bufs.reduce((function(t,r){return t+r.length}),0),this},BufferWriter.prototype.toBuffer=function(){return this.concat()},BufferWriter.prototype.concat=function(){return Buffer.concat(this.bufs,this.bufLen)},BufferWriter.prototype.write=function(t){return assert(Buffer.isBuffer(t)),this.bufs.push(t),this.bufLen+=t.length,this},BufferWriter.prototype.writeReverse=function(t){return assert(Buffer.isBuffer(t)),this.bufs.push(Buffer.from(t).reverse()),this.bufLen+=t.length,this},BufferWriter.prototype.writeUInt8=function(t){var r=Buffer.alloc(1);return r.writeUInt8(t,0),this.write(r),this},BufferWriter.prototype.writeUInt16BE=function(t){var r=Buffer.alloc(2);return r.writeUInt16BE(t,0),this.write(r),this},BufferWriter.prototype.writeUInt16LE=function(t){var r=Buffer.alloc(2);return r.writeUInt16LE(t,0),this.write(r),this},BufferWriter.prototype.writeUInt32BE=function(t){var r=Buffer.alloc(4);return r.writeUInt32BE(t,0),this.write(r),this},BufferWriter.prototype.writeInt32LE=function(t){var r=Buffer.alloc(4);return r.writeInt32LE(t,0),this.write(r),this},BufferWriter.prototype.writeUInt32LE=function(t){var r=Buffer.alloc(4);return r.writeUInt32LE(t,0),this.write(r),this},BufferWriter.prototype.writeUInt64BEBN=function(t){var r=t.toBuffer({size:8});return this.write(r),this},BufferWriter.prototype.writeUInt64LEBN=function(t){var r=t.toBuffer({size:8});return this.writeReverse(r),this},BufferWriter.prototype.writeVarintNum=function(t){var r=BufferWriter.varintBufNum(t);return this.write(r),this},BufferWriter.prototype.writeVarintBN=function(t){var r=BufferWriter.varintBufBN(t);return this.write(r),this},BufferWriter.varintBufNum=function(t){var r;return t<253?(r=Buffer.alloc(1)).writeUInt8(t,0):t<65536?((r=Buffer.alloc(3)).writeUInt8(253,0),r.writeUInt16LE(t,1)):t<4294967296?((r=Buffer.alloc(5)).writeUInt8(254,0),r.writeUInt32LE(t,1)):((r=Buffer.alloc(9)).writeUInt8(255,0),r.writeInt32LE(-1&t,1),r.writeUInt32LE(Math.floor(t/4294967296),5)),r},BufferWriter.varintBufBN=function(t){var r,e=t.toNumber();if(e<253)(r=Buffer.alloc(1)).writeUInt8(e,0);else if(e<65536)(r=Buffer.alloc(3)).writeUInt8(253,0),r.writeUInt16LE(e,1);else if(e<4294967296)(r=Buffer.alloc(5)).writeUInt8(254,0),r.writeUInt32LE(e,1);else{var i=new BufferWriter;i.writeUInt8(255),i.writeUInt64LEBN(t),r=i.concat()}return r},module.exports=BufferWriter;