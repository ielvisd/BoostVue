"use strict";var _=require("../util/_");function format(r,e){return r.replace("{0}",e[0]).replace("{1}",e[1]).replace("{2}",e[2])}var traverseNode=function(r,e){var t=function(){if(_.isString(e.message))this.message=format(e.message,arguments);else{if(!_.isFunction(e.message))throw new Error("Invalid error definition for "+e.name);this.message=e.message.apply(null,arguments)}this.stack=this.message+"\n"+(new Error).stack};return(t.prototype=Object.create(r.prototype)).name=r.prototype.name+e.name,r[e.name]=t,e.errors&&childDefinitions(t,e.errors),t},childDefinitions=function(r,e){_.each(e,(function(e){traverseNode(r,e)}))},traverseRoot=function(r,e){return childDefinitions(r,e),r},bsv={Error:function(){this.message="Internal error",this.stack=this.message+"\n"+(new Error).stack}};bsv.Error.prototype=Object.create(Error.prototype),bsv.Error.prototype.name="bsv.Error";var data=require("./spec");traverseRoot(bsv.Error,data),module.exports=bsv.Error,module.exports.extend=function(r){return traverseNode(bsv.Error,r)};