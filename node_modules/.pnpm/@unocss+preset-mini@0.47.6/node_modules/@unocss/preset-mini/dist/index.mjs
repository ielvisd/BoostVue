import { entriesToCss, toArray } from '@unocss/core';
import './shared/preset-mini.0dd71da8.mjs';
export { p as parseColor } from './shared/preset-mini.690517b1.mjs';
import { r as rules } from './shared/preset-mini.71bf58e8.mjs';
export { c as colors } from './shared/preset-mini.65ac75be.mjs';
import { t as theme } from './shared/preset-mini.3aa2cc9c.mjs';
export { t as theme } from './shared/preset-mini.3aa2cc9c.mjs';
import { v as variants } from './shared/preset-mini.fef10425.mjs';
import './shared/preset-mini.74d943b2.mjs';

const preflights = [
  {
    layer: "preflights",
    getCSS(ctx) {
      if (ctx.theme.preflightBase) {
        const css = entriesToCss(Object.entries(ctx.theme.preflightBase));
        const roots = toArray(ctx.theme.preflightRoot ?? ["*,::before,::after", "::backdrop"]);
        return roots.map((root) => `${root}{${css}}`).join("");
      }
    }
  }
];

const presetMini = (options = {}) => {
  options.dark = options.dark ?? "class";
  options.attributifyPseudo = options.attributifyPseudo ?? false;
  options.preflight = options.preflight ?? true;
  return {
    name: "@unocss/preset-mini",
    theme,
    rules,
    variants: variants(options),
    options,
    postprocess: options.variablePrefix && options.variablePrefix !== "un-" ? VarPrefixPostprocessor(options.variablePrefix) : void 0,
    preflights: options.preflight ? preflights : [],
    prefix: options.prefix
  };
};
function VarPrefixPostprocessor(prefix) {
  return (obj) => {
    obj.entries.forEach((i) => {
      i[0] = i[0].replace(/^--un-/, `--${prefix}`);
      if (typeof i[1] === "string")
        i[1] = i[1].replace(/var\(--un-/g, `var(--${prefix}`);
    });
  };
}

export { presetMini as default, preflights, presetMini };
